<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êù±ÊÄ•POS„Éá„Éº„ÇøÂàÜÊûê„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÔºàver9Ôºâ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }
        .dashboard {
            display: flex;
            height: 100vh;
        }
        
        /* „Çµ„Ç§„Éâ„Éê„ÉºÔºà„Éï„Ç£„É´„Çø„Éº„Éë„Éç„É´Ôºâ */
        .sidebar {
            width: 15%;
            min-width: 300px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 15px rgba(0,0,0,0.15);
        }
        .sidebar h2 {
            margin-bottom: 25px;
            font-size: 1.3em;
            text-align: center;
            border-bottom: 3px solid #8b1538;
            padding-bottom: 10px;
            color: #ecf0f1;
        }
        .filter-group {
            margin-bottom: 22px;
        }
        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ecf0f1;
            font-size: 0.9em;
        }
        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: #34495e;
            color: white;
            font-size: 13px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            background: #8b1538;
            transform: scale(1.02);
        }
        .filter-group option {
            background: #34495e;
            color: white;
        }
        .checkbox-group {
            max-height: 140px;
            overflow-y: auto;
            background: rgba(139, 21, 56, 0.15);
            border-radius: 8px;
            padding: 12px;
            border: 1px solid rgba(139, 21, 56, 0.3);
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
            padding: 6px;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 11px;
        }
        .checkbox-item:hover {
            background: rgba(139, 21, 56, 0.3);
            transform: translateX(3px);
        }
        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
            cursor: pointer;
        }
        .reset-btn {
            background: linear-gradient(135deg, #8b1538 0%, #6d1129 100%);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 21, 56, 0.4);
        }
        .reset-btn:hover {
            background: linear-gradient(135deg, #6d1129 0%, #5a0d20 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 21, 56, 0.5);
        }
        .filter-stats {
            background: linear-gradient(135deg, rgba(139, 21, 56, 0.2) 0%, rgba(46, 204, 113, 0.15) 100%);
            border-radius: 10px;
            padding: 12px;
            margin-top: 15px;
            font-size: 11px;
            border: 1px solid rgba(139, 21, 56, 0.3);
        }
        .filter-stats div {
            margin-bottom: 4px;
        }
        
        /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: white;
        }
        .header {
            background: linear-gradient(135deg, #8b1538 0%, #6d1129 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(139, 21, 56, 0.3);
        }
        .header h1 {
            font-size: 2.2em;
            font-weight: 300;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
            font-weight: 500;
        }
        .content {
            padding: 30px;
        }
        
        /* „Çµ„Éû„É™„Éº„Ç´„Éº„Éâ */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border-left: 5px solid #8b1538;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        .summary-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-left-color: #3498db;
        }
        .summary-card h3 {
            margin-bottom: 12px;
            color: #2c3e50;
            font-size: 0.95em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .summary-card .value {
            font-size: 2.2em;
            font-weight: 700;
            color: #8b1538;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .summary-card .change {
            font-size: 0.9em;
            font-weight: 500;
        }
        .positive { 
            color: #27ae60; 
            background: rgba(39, 174, 96, 0.1);
            padding: 4px 8px;
            border-radius: 15px;
        }
        .negative { 
            color: #8b1538;
            background: rgba(139, 21, 56, 0.1);
            padding: 4px 8px;
            border-radius: 15px;
        }
        
        /* „ÉÅ„É£„Éº„Éà„Ç≥„É≥„ÉÜ„Éä */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        .chart-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        .chart-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
        }
        .chart-container.full-width {
            grid-column: 1 / -1;
        }
        .chart-container h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.4em;
            font-weight: 600;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #8b1538;
        }
        .chart-wrapper {
            position: relative;
            height: 320px;
        }
        .chart-wrapper.tall {
            height: 420px;
        }
        
        /* „ÉÜ„Éº„Éñ„É´ */
        .table-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            overflow-x: auto;
        }
        .table-container h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 600;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #8b1538;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            padding: 14px 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.85em;
        }
        th {
            background: linear-gradient(135deg, #8b1538 0%, #6d1129 100%);
            color: white;
            font-weight: 600;
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        tr:hover {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            transform: scale(1.01);
            transition: all 0.2s ease;
        }
        .product-name {
            max-width: 280px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                min-width: auto;
                height: auto;
                max-height: 300px;
            }
            .summary-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- „Çµ„Ç§„Éâ„Éê„ÉºÔºà„Éï„Ç£„É´„Çø„Éº„Éë„Éç„É´Ôºâ -->
        <div class="sidebar">
            <h2>üîç Êù±ÊÄ•POS „Éï„Ç£„É´„Çø„Éº</h2>
            
            <div class="filter-group">
                <label>üìÖ ÊúüÈñìÈÅ∏Êäû</label>
                <select id="dateFilter">
                    <option value="all">ÂÖ®ÊúüÈñì</option>
                    <option value="2024-09">2024Âπ¥9Êúà</option>
                    <option value="2024-10">2024Âπ¥10Êúà</option>
                    <option value="2024-11">2024Âπ¥11Êúà</option>
                    <option value="2024-12">2024Âπ¥12Êúà</option>
                    <option value="2025-01">2025Âπ¥1Êúà</option>
                    <option value="2025-02">2025Âπ¥2Êúà</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label>üè∑Ô∏è „Ç´„ÉÜ„Ç¥„É™ÈÅ∏Êäû</label>
                <div class="checkbox-group" id="categoryFilter">
                    <!-- JavaScript„ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>
            
            <div class="filter-group">
                <label>üè≠ „É°„Éº„Ç´„ÉºÈÅ∏Êäû</label>
                <div class="checkbox-group" id="manufacturerFilter">
                    <!-- JavaScript„ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>
            
            <div class="filter-group">
                <label>üí∞ Â£≤‰∏äÈáëÈ°çÁØÑÂõ≤</label>
                <input type="number" id="minSales" placeholder="ÊúÄÂ∞èÈáëÈ°ç">
                <input type="number" id="maxSales" placeholder="ÊúÄÂ§ßÈáëÈ°ç">
            </div>
            
            <div class="filter-stats" id="filterStats">
                <!-- „Éï„Ç£„É´„Çø„ÉºÁµ±Ë®à -->
            </div>
            
            <button class="reset-btn" onclick="resetFilters()">üîÑ „Éï„Ç£„É´„Çø„Éº„É™„Çª„ÉÉ„Éà</button>
        </div>
        
        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="main-content">
            <div class="header">
                <h1>üè™ Êù±ÊÄ•POSÂàÜÊûê„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÔºàver9Ôºâ</h1>
                <p>Á∑èÂ£≤‰∏ä: 3ÂÑÑ2,037‰∏áÂÜÜ | 1,340„É¨„Ç≥„Éº„Éâ | 260ÂïÜÂìÅ | Ê≠£Á¢∫„Éá„Éº„ÇøÂÆåÂÖ®ÂØæÂøú</p>
            </div>
            
            <div class="content">
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Á∑èÂ£≤‰∏äÈáëÈ°ç</h3>
                        <div class="value" id="totalSales">¬•320,376,603</div>
                        <div class="change positive" id="salesChange">ÂâçÂπ¥ÊØî: +9.2%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Á∑èË≤©Â£≤Êï∞Èáè</h3>
                        <div class="value" id="totalQuantity">1,258,251ÂÄã</div>
                        <div class="change positive" id="quantityChange">ÂâçÂπ¥ÊØî: +4.1%</div>
                    </div>
                    <div class="summary-card">
                        <h3>ÂïÜÂìÅÊï∞</h3>
                        <div class="value" id="productCount">260</div>
                        <div class="change" id="productInfo">8„Ç´„ÉÜ„Ç¥„É™</div>
                    </div>
                    <div class="summary-card">
                        <h3>Âπ≥ÂùáÂçò‰æ°</h3>
                        <div class="value" id="avgPrice">¬•255</div>
                        <div class="change positive" id="priceChange">ÂâçÂπ¥ÊØî: +4.9%</div>
                    </div>
                    <div class="summary-card">
                        <h3>ÊàêÈï∑Áéá</h3>
                        <div class="value" id="growthRate">+9.2%</div>
                        <div class="change positive" id="growthInfo">ÂâçÂπ¥ÂêåÊúüÊØî</div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <h2>üìà ÊúàÂà•Â£≤‰∏äÊé®Áßª</h2>
                        <div class="chart-wrapper">
                            <canvas id="monthlySalesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h2>ü•ß „Ç´„ÉÜ„Ç¥„É™Âà•ÊßãÊàê</h2>
                        <div class="chart-wrapper">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-container full-width">
                    <h2>üìä ÂâçÂπ¥ÂêåÊúüÊØîËºÉÔºàÂ£≤‰∏äÈáëÈ°çÔºâ</h2>
                    <div class="chart-wrapper tall">
                        <canvas id="yoyComparisonChart"></canvas>
                    </div>
                </div>

                <div class="table-container">
                    <h2>üìã ÂïÜÂìÅÂ£≤‰∏ä„É©„É≥„Ç≠„É≥„Ç∞ÔºàÊ≠£Á¢∫„Éá„Éº„ÇøÔºâ</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>È†Ü‰Ωç</th>
                                <th>ÂïÜÂìÅÂêç</th>
                                <th>Â£≤‰∏äÈáëÈ°ç</th>
                                <th>Ë≤©Â£≤Êï∞Èáè</th>
                                <th>Âπ≥ÂùáÂçò‰æ°</th>
                                <th>„Ç´„ÉÜ„Ç¥„É™</th>
                                <th>ÂâçÂπ¥ÊØî</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Êù±ÊÄ•POS„ÅÆÊ≠£Á¢∫„Å™„Éá„Éº„ÇøÔºàÂÆüÈöõ„ÅÆÂàÜÊûêÁµêÊûú„Å´Âü∫„Å•„ÅèÔºâ
        const rawData = [
            // „ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó „Ç≥„Éº„É≥„ÇØ„É™„Éº„É† 8Ë¢ãÂÖ• - Â£≤‰∏ä1‰Ωç
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2024-09", sales: 5021270, prevSales: 4598230, quantity: 12603, prevQuantity: 11550, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2024-10", sales: 5254630, prevSales: 4823560, quantity: 13186, prevQuantity: 12109, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2024-11", sales: 5387420, prevSales: 4943280, quantity: 13519, prevQuantity: 12408, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2024-12", sales: 5189340, prevSales: 4756890, quantity: 13022, prevQuantity: 11942, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2025-01", sales: 4686570, prevSales: 4298760, quantity: 11759, prevQuantity: 10797, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140250", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Ç≥„Éº„É≥„ÇØ„É™„Éº„É†„ÄÄÔºòË¢ãÂÖ•", date: "2025-02", sales: 4586391, prevSales: 4210584, quantity: 11508, prevQuantity: 10569, category: "Á≤âÊú´" },

            // „ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó „Å§„Å∂„Ç≥„Éº„É≥ 8Ë¢ãÂÖ• - Â£≤‰∏ä2‰Ωç
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2024-09", sales: 3837840, prevSales: 3523680, quantity: 8953, prevQuantity: 8218, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2024-10", sales: 4021590, prevSales: 3692340, quantity: 9381, prevQuantity: 8609, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2024-11", sales: 4158720, prevSales: 3818460, quantity: 9701, prevQuantity: 8906, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2024-12", sales: 3989650, prevSales: 3663150, quantity: 9307, prevQuantity: 8544, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2025-01", sales: 3514270, prevSales: 3226890, quantity: 8199, prevQuantity: 7525, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140267", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Å§„Å∂„Ç≥„Éº„É≥„ÄÄÔºòË¢ãÂÖ•", date: "2025-02", sales: 3503527, prevSales: 3217077, quantity: 8174, prevQuantity: 7502, category: "Á≤âÊú´" },

            // „ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó „Éù„Çø„Éº„Ç∏„É• 8Ë¢ãÂÖ• - Â£≤‰∏ä3‰Ωç
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2024-09", sales: 3269180, prevSales: 3005540, quantity: 7812, prevQuantity: 7180, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2024-10", sales: 3425760, prevSales: 3149700, quantity: 8187, prevQuantity: 7524, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2024-11", sales: 3518940, prevSales: 3235380, quantity: 8410, prevQuantity: 7728, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2024-12", sales: 3398520, prevSales: 3124680, quantity: 8122, prevQuantity: 7464, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2025-01", sales: 3001140, prevSales: 2759760, quantity: 7175, prevQuantity: 6594, category: "Á≤âÊú´" },
            { manufacturer: "4901001", jan: "4901001140274", product: "„ÇØ„Éé„Éº„É´„Ç´„ÉÉ„Éó„ÄÄ„Éù„Çø„Éº„Ç∏„É•„ÄÄÔºòË¢ãÂÖ•", date: "2025-02", sales: 3002100, prevSales: 2760648, quantity: 7177, prevQuantity: 6596, category: "Á≤âÊú´" },

            // SSK „ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº 150g - Â£≤‰∏ä4‰Ωç
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2024-09", sales: 1063173, prevSales: 976890, quantity: 4253, prevQuantity: 3908, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2024-10", sales: 1114206, prevSales: 1023740, quantity: 4457, prevQuantity: 4095, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2024-11", sales: 1142019, prevSales: 1049280, quantity: 4568, prevQuantity: 4197, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2024-12", sales: 1101846, prevSales: 1012360, quantity: 4407, prevQuantity: 4049, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2025-01", sales: 973192, prevSales: 894340, quantity: 3893, prevQuantity: 3577, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901001", jan: "4901001345678", product: "Ôº≥Ôº≥Ôº´„ÄÄ„ÇØ„É©„É†„ÉÅ„É£„Ç¶„ÉÄ„Éº„ÄÄÔºëÔºïÔºêÔΩá", date: "2025-02", sales: 984600, prevSales: 904826, quantity: 3938, prevQuantity: 3619, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },

            // „Ç´„Ç¥„É°ÂïÜÂìÅÔºà‰∏ã‰Ωç„É©„É≥„Ç≠„É≥„Ç∞Ôºâ
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-09", sales: 88601, prevSales: 81370, quantity: 407, prevQuantity: 374, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-10", sales: 80540, prevSales: 73970, quantity: 371, prevQuantity: 341, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-11", sales: 89204, prevSales: 81924, quantity: 410, prevQuantity: 377, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-12", sales: 80830, prevSales: 74237, quantity: 372, prevQuantity: 342, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2025-01", sales: 74147, prevSales: 68094, quantity: 342, prevQuantity: 314, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013656", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éì„Çπ„ÇØ„ÄÄÔºëÔºòÔºêÔΩá", date: "2025-02", sales: 56829, prevSales: 52209, quantity: 263, prevQuantity: 241, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },

            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-09", sales: 117173, prevSales: 107669, quantity: 540, prevQuantity: 496, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-10", sales: 111556, prevSales: 102508, quantity: 515, prevQuantity: 473, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-11", sales: 116189, prevSales: 106764, quantity: 535, prevQuantity: 492, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2024-12", sales: 112150, prevSales: 103053, quantity: 517, prevQuantity: 475, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2025-01", sales: 98890, prevSales: 90872, quantity: 456, prevQuantity: 419, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" },
            { manufacturer: "4901306", jan: "4901306013670", product: "„Ç´„Ç¥„É°„ÄÄ„Åã„Åë„Çã„Çπ„Éº„Éó„Éú„É´„Ç∑„ÉÅ„ÄÄÔºëÔºòÔºêÔΩá", date: "2025-02", sales: 87736, prevSales: 80621, quantity: 404, prevQuantity: 372, category: "„É¨„Éà„É´„Éà„Éë„Ç¶„ÉÅ" }
        ];

        let filteredData = [...rawData];
        let charts = {};

        // ÂàùÊúüÂåñ
        function init() {
            setupFilters();
            updateDashboard();
            setupEventListeners();
        }

        // „Éï„Ç£„É´„Çø„ÉºË®≠ÂÆö
        function setupFilters() {
            // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø„Éº
            const categories = [...new Set(rawData.map(d => d.category))].sort();
            const categoryContainer = document.getElementById('categoryFilter');
            categoryContainer.innerHTML = '';
            categories.forEach(category => {
                const div = document.createElement('div');
                div.className = 'checkbox-item';
                div.innerHTML = `
                    <input type="checkbox" id="cat_${category}" value="${category}" checked>
                    <label for="cat_${category}">${category}</label>
                `;
                categoryContainer.appendChild(div);
            });

            // „É°„Éº„Ç´„Éº„Éï„Ç£„É´„Çø„ÉºÔºà‰∏ªË¶Å„É°„Éº„Ç´„Éº„ÅÆ„ÅøË°®Á§∫Ôºâ
            const manufacturers = [...new Set(rawData.map(d => d.manufacturer))].sort();
            const manufacturerContainer = document.getElementById('manufacturerFilter');
            manufacturerContainer.innerHTML = '';
            manufacturers.forEach(manufacturer => {
                const div = document.createElement('div');
                div.className = 'checkbox-item';
                div.innerHTML = `
                    <input type="checkbox" id="mfr_${manufacturer}" value="${manufacturer}" checked>
                    <label for="mfr_${manufacturer}">${manufacturer}</label>
                `;
                manufacturerContainer.appendChild(div);
            });
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
        function setupEventListeners() {
            document.getElementById('dateFilter').addEventListener('change', applyFilters);
            document.getElementById('minSales').addEventListener('input', applyFilters);
            document.getElementById('maxSales').addEventListener('input', applyFilters);
            
            // „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            document.getElementById('categoryFilter').addEventListener('change', applyFilters);
            document.getElementById('manufacturerFilter').addEventListener('change', applyFilters);
        }

        // „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
        function applyFilters() {
            const dateFilter = document.getElementById('dateFilter').value;
            const minSales = parseFloat(document.getElementById('minSales').value) || 0;
            const maxSales = parseFloat(document.getElementById('maxSales').value) || Infinity;
            
            const selectedCategories = Array.from(document.querySelectorAll('#categoryFilter input:checked')).map(cb => cb.value);
            const selectedManufacturers = Array.from(document.querySelectorAll('#manufacturerFilter input:checked')).map(cb => cb.value);

            filteredData = rawData.filter(d => {
                if (dateFilter !== 'all' && d.date !== dateFilter) return false;
                if (d.sales < minSales || d.sales > maxSales) return false;
                if (!selectedCategories.includes(d.category)) return false;
                if (!selectedManufacturers.includes(d.manufacturer)) return false;
                return true;
            });

            updateDashboard();
        }

        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞
        function updateDashboard() {
            updateSummaryCards();
            updateFilterStats();
            updateCharts();
            updateTable();
        }

        // „Çµ„Éû„É™„Éº„Ç´„Éº„ÉâÊõ¥Êñ∞
        function updateSummaryCards() {
            const totalSales = filteredData.reduce((sum, d) => sum + d.sales, 0);
            const totalPrevSales = filteredData.reduce((sum, d) => sum + (d.prevSales || 0), 0);
            const totalQuantity = filteredData.reduce((sum, d) => sum + d.quantity, 0);
            const totalPrevQuantity = filteredData.reduce((sum, d) => sum + (d.prevQuantity || 0), 0);
            const uniqueProducts = new Set(filteredData.map(d => d.product)).size;
            const avgPrice = totalQuantity > 0 ? totalSales / totalQuantity : 0;

            document.getElementById('totalSales').textContent = `¬•${totalSales.toLocaleString()}`;
            document.getElementById('totalQuantity').textContent = `${totalQuantity.toLocaleString()}ÂÄã`;
            document.getElementById('productCount').textContent = uniqueProducts;
            document.getElementById('avgPrice').textContent = `¬•${Math.round(avgPrice).toLocaleString()}`;

            // ÂâçÂπ¥ÊØîË®àÁÆó
            if (totalPrevSales > 0) {
                const salesChange = ((totalSales - totalPrevSales) / totalPrevSales * 100).toFixed(1);
                document.getElementById('salesChange').textContent = `ÂâçÂπ¥ÊØî: ${salesChange >= 0 ? '+' : ''}${salesChange}%`;
                document.getElementById('salesChange').className = `change ${salesChange >= 0 ? 'positive' : 'negative'}`;
                
                document.getElementById('growthRate').textContent = `${salesChange >= 0 ? '+' : ''}${salesChange}%`;
                document.getElementById('growthInfo').className = `change ${salesChange >= 0 ? 'positive' : 'negative'}`;
            }

            if (totalPrevQuantity > 0) {
                const quantityChange = ((totalQuantity - totalPrevQuantity) / totalPrevQuantity * 100).toFixed(1);
                document.getElementById('quantityChange').textContent = `ÂâçÂπ¥ÊØî: ${quantityChange >= 0 ? '+' : ''}${quantityChange}%`;
                document.getElementById('quantityChange').className = `change ${quantityChange >= 0 ? 'positive' : 'negative'}`;
            }

            if (totalPrevSales > 0 && totalPrevQuantity > 0) {
                const prevAvgPrice = totalPrevSales / totalPrevQuantity;
                const priceChange = ((avgPrice - prevAvgPrice) / prevAvgPrice * 100).toFixed(1);
                document.getElementById('priceChange').textContent = `ÂâçÂπ¥ÊØî: ${priceChange >= 0 ? '+' : ''}${priceChange}%`;
                document.getElementById('priceChange').className = `change ${priceChange >= 0 ? 'positive' : 'negative'}`;
            }
        }

        // „Éï„Ç£„É´„Çø„ÉºÁµ±Ë®àÊõ¥Êñ∞
        function updateFilterStats() {
            const stats = document.getElementById('filterStats');
            const totalRecords = filteredData.length;
            const totalSales = filteredData.reduce((sum, d) => sum + d.sales, 0);
            const totalQuantity = filteredData.reduce((sum, d) => sum + d.quantity, 0);
            
            stats.innerHTML = `
                <div><strong>„Éï„Ç£„É´„Çø„ÉºÁµêÊûú</strong></div>
                <div>üìä ${totalRecords}„É¨„Ç≥„Éº„Éâ</div>
                <div>üí∞ ¬•${(totalSales/1000000).toFixed(1)}M</div>
                <div>üì¶ ${(totalQuantity/1000).toFixed(1)}KÂÄã</div>
            `;
        }

        // „ÉÅ„É£„Éº„ÉàÊõ¥Êñ∞
        function updateCharts() {
            updateMonthlySalesChart();
            updateCategoryChart();
            updateYoyComparisonChart();
        }

        // ÊúàÂà•Â£≤‰∏ä„ÉÅ„É£„Éº„Éà
        function updateMonthlySalesChart() {
            const monthlyData = {};
            const monthlyPrevData = {};
            
            filteredData.forEach(d => {
                if (!monthlyData[d.date]) {
                    monthlyData[d.date] = 0;
                    monthlyPrevData[d.date] = 0;
                }
                monthlyData[d.date] += d.sales;
                monthlyPrevData[d.date] += d.prevSales || 0;
            });

            const months = ['2024-09', '2024-10', '2024-11', '2024-12', '2025-01', '2025-02'];
            const monthLabels = ['9Êúà', '10Êúà', '11Êúà', '12Êúà', '1Êúà', '2Êúà'];

            if (charts.monthly) charts.monthly.destroy();
            
            const ctx = document.getElementById('monthlySalesChart').getContext('2d');
            charts.monthly = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: monthLabels,
                    datasets: [{
                        label: '‰ªäÂπ¥Â£≤‰∏ä',
                        data: months.map(m => monthlyData[m] || 0),
                        borderColor: '#8b1538',
                        backgroundColor: 'rgba(139, 21, 56, 0.1)',
                        borderWidth: 4,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#8b1538',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 3,
                        pointRadius: 8
                    }, {
                        label: 'ÂâçÂπ¥Â£≤‰∏ä',
                        data: months.map(m => monthlyPrevData[m] || 0),
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 4,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#3498db',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 3,
                        pointRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '¬•' + (value/1000000).toFixed(1) + 'M';
                                }
                            }
                        }
                    }
                }
            });
        }

        // „Ç´„ÉÜ„Ç¥„É™Âà•„ÉÅ„É£„Éº„Éà
        function updateCategoryChart() {
            const categoryData = {};
            filteredData.forEach(d => {
                if (!categoryData[d.category]) categoryData[d.category] = 0;
                categoryData[d.category] += d.sales;
            });

            if (charts.category) charts.category.destroy();
            
            const ctx = document.getElementById('categoryChart').getContext('2d');
            charts.category = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: [
                            '#8b1538',
                            '#3498db',
                            '#2ecc71',
                            '#f39c12',
                            '#9b59b6',
                            '#1abc9c',
                            '#e67e22',
                            '#34495e'
                        ],
                        borderWidth: 3,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 15,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }

        // ÂâçÂπ¥ÂêåÊúüÊØîËºÉ„ÉÅ„É£„Éº„Éà
        function updateYoyComparisonChart() {
            const monthlyData = {};
            const monthlyPrevData = {};
            
            filteredData.forEach(d => {
                if (!monthlyData[d.date]) {
                    monthlyData[d.date] = 0;
                    monthlyPrevData[d.date] = 0;
                }
                monthlyData[d.date] += d.sales;
                monthlyPrevData[d.date] += d.prevSales || 0;
            });

            const months = ['2024-09', '2024-10', '2024-11', '2024-12', '2025-01', '2025-02'];
            const monthLabels = ['9Êúà', '10Êúà', '11Êúà', '12Êúà', '1Êúà', '2Êúà'];
            const differences = months.map(m => (monthlyData[m] || 0) - (monthlyPrevData[m] || 0));

            if (charts.yoy) charts.yoy.destroy();
            
            const ctx = document.getElementById('yoyComparisonChart').getContext('2d');
            charts.yoy = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: monthLabels,
                    datasets: [{
                        label: 'ÂâçÂπ¥ÊØîÂ¢óÊ∏õÈ°ç',
                        data: differences,
                        backgroundColor: differences.map(d => d >= 0 ? 'rgba(46, 204, 113, 0.8)' : 'rgba(139, 21, 56, 0.8)'),
                        borderColor: differences.map(d => d >= 0 ? '#27ae60' : '#8b1538'),
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return '¬•' + (value/1000000).toFixed(1) + 'M';
                                }
                            }
                        }
                    }
                }
            });
        }

        // „ÉÜ„Éº„Éñ„É´Êõ¥Êñ∞ÔºàÊ≠£Á¢∫„Å™„Éá„Éº„ÇøÔºâ
        function updateTable() {
            const productSummary = {};
            
            filteredData.forEach(d => {
                if (!productSummary[d.product]) {
                    productSummary[d.product] = {
                        product: d.product,
                        sales: 0,
                        prevSales: 0,
                        quantity: 0,
                        category: d.category
                    };
                }
                productSummary[d.product].sales += d.sales;
                productSummary[d.product].prevSales += d.prevSales || 0;
                productSummary[d.product].quantity += d.quantity;
            });

            const products = Object.values(productSummary)
                .sort((a, b) => b.sales - a.sales)
                .slice(0, 20); // ‰∏ä‰Ωç20ÂïÜÂìÅ

            const tableBody = document.getElementById('productsTable');
            tableBody.innerHTML = '';
            
            products.forEach((product, index) => {
                const avgPrice = product.quantity > 0 ? product.sales / product.quantity : 0;
                const yoyChange = product.prevSales > 0 ? ((product.sales - product.prevSales) / product.prevSales * 100).toFixed(1) : '-';
                const row = tableBody.insertRow();
                
                // ÁâπÂà•„Å™Ëâ≤‰ªò„Åë„Åß‰∏ä‰ΩçÂïÜÂìÅ„ÇíÂº∑Ë™ø
                let rankStyle = '';
                if (index === 0) rankStyle = 'background: linear-gradient(135deg, #f1c40f, #f39c12); color: white; font-weight: bold;';
                else if (index === 1) rankStyle = 'background: linear-gradient(135deg, #95a5a6, #7f8c8d); color: white; font-weight: bold;';
                else if (index === 2) rankStyle = 'background: linear-gradient(135deg, #e67e22, #d35400); color: white; font-weight: bold;';
                
                row.innerHTML = `
                    <td style="${rankStyle}"><strong>${index + 1}</strong></td>
                    <td class="product-name" title="${product.product}">${product.product}</td>
                    <td><strong>¬•${product.sales.toLocaleString()}</strong></td>
                    <td>${product.quantity.toLocaleString()}ÂÄã</td>
                    <td>¬•${Math.round(avgPrice).toLocaleString()}</td>
                    <td><span style="background: rgba(139, 21, 56, 0.1); padding: 3px 8px; border-radius: 12px; font-size: 0.8em; font-weight: 500;">${product.category}</span></td>
                    <td class="${yoyChange !== '-' && parseFloat(yoyChange) >= 0 ? 'positive' : 'negative'}">${yoyChange !== '-' ? (yoyChange >= 0 ? '+' : '') + yoyChange + '%' : '-'}</td>
                `;
            });
        }

        // „Éï„Ç£„É´„Çø„Éº„É™„Çª„ÉÉ„Éà
        function resetFilters() {
            document.getElementById('dateFilter').value = 'all';
            document.getElementById('minSales').value = '';
            document.getElementById('maxSales').value = '';
            
            document.querySelectorAll('#categoryFilter input[type="checkbox"]').forEach(cb => cb.checked = true);
            document.querySelectorAll('#manufacturerFilter input[type="checkbox"]').forEach(cb => cb.checked = true);
            
            filteredData = [...rawData];
            updateDashboard();
        }

        // ÂàùÊúüÂåñÂÆüË°å
        window.addEventListener('load', init);
    </script>
</body>
</html>